{% extends 'base.html' %}
{% block content %}
<section class="hero">
  <!-- Centralized Back to Dashboard -->
  <div style="text-align: center; margin-bottom: 20px;">
    <a href="{{ url_for('admin_dashboard') }}" class="back-link">← Back to Dashboard</a>
  </div>

  <!-- A4 Portrait Card -->
  <div class="a4-portrait">
    <!-- Header Section -->
    <div class="company-header">
      <img src="{{ url_for('static', filename='android-chrome-512x512.png') }}" alt="Okoya Food Logo" class="company-logo">
      <div class="company-text">
        <h1 class="company-name">OKOYA FOOD COMPANY LIMITED</h1>
        <h2 class="company-motto">POVERTY ERADICATION, REDUCE INEQUALITY AND LEAVE NO ONE BEHIND</h2>
        <p class="company-address">
          KM 7 idi APA community, along Ilesha Ibaruba express way, Shaki, Oyo State, Nigeria
        </p>
      </div>
    </div>

    <!-- Passport Upload -->
    <div class="passport-box no-print" style="text-align: center; margin-bottom: 20px;">
      <label for="passport">Upload Passport Photograph</label><br>
      <input type="file" id="passport" name="passport" accept="image/*"><br>
      <img id="passportPreview" alt="Passport Photo" style="margin-top: 10px; height: 120px; width: 100px; object-fit: cover; border: 1px solid #000;">
    </div>

    <!-- Worker Registration Form -->
    <form method="POST" enctype="multipart/form-data" class="register-form" id="workerForm">
      <div class="form-grid">
        <div><label>Name:</label><input type="text" name="name" required></div>
        <div><label>Phone:</label><input type="text" name="phone_number" required></div>
        <div><label>Date of Birth:</label><input type="date" name="date_of_birth" required></div>
        <div><label>Gender:</label><input type="text" name="gender" required></div>
        <div><label>Email:</label><input type="email" name="email" required></div>
        <div><label>Qualifications:</label><input type="text" name="qualifications" required></div>
        <div><label>Position:</label><input type="text" name="position" required></div>
        <div><label>Amount of Salary:</label><input type="number" name="amount_of_salary" required></div>
        <div><label>Date of Employment:</label><input type="date" name="date_of_employment" required></div>
        <div><label>Guarantor:</label><input type="text" name="guarantor" required></div>
        <div><label>National ID:</label><input type="text" name="national_id" required></div>
        <div><label>Nationality:</label><input type="text" name="nationality" required></div>
        <div><label>Ethnic Group:</label><input type="text" name="ethnic_group" required></div>
        <div><label>Disability:</label><input type="text" name="disability"></div>
        <div><label>Home Address:</label><input type="text" name="home_address" required></div>
        <div><label>Place of Residence:</label><input type="text" name="place_of_residence" required></div>
        <div><label>Bank Account Name:</label><input type="text" name="bank_account_name" required></div>
        <div><label>Bank Name:</label><input type="text" name="bank_name" required></div>
        <div><label>Bank Account:</label><input type="number" name="bank_account" required></div>
      </div>

      <!-- Submit Button -->
      <div class="form-submit no-print" style="text-align: center; margin-top: 20px;">
        <input type="submit" value="Register Worker">
      </div>
    </form>

    <!-- Footer -->
    <div class="footer" style="text-align: center; margin-top: 30px; font-weight: bold; color: #004080;">
      © OKOYA FOOD COMPANY
    </div>
  </div>
</section>

<!-- JS for Passport Preview & Auto Print -->
<script>
  // Passport Preview
  document.getElementById('passport').addEventListener('change', function(event) {
    const preview = document.getElementById('passportPreview');
    const file = event.target.files[0];
    if (file) {
      preview.src = URL.createObjectURL(file);
    }
  });

  // Auto Print after Submit
  document.getElementById('workerForm').addEventListener('submit', function(event) {
    setTimeout(function() {
      window.print();
    }, 100);
  });
</script>

<style>
/* Center page and A4 card */
body {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding-top: 30px;
  background: #f0f8ff;
  margin: 0;
  font-family: Arial, sans-serif;
}

/* A4 Portrait Card */
.a4-portrait {
  width: 210mm;
  min-height: 297mm;
  background: #fff;
  padding: 30px 40px;
  box-sizing: border-box;
  box-shadow: 0 0 20px rgba(0,0,0,0.1);
  border: 3px solid #28a745;
  border-radius: 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Header */
.company-header {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 20px;
  flex-wrap: wrap;
  margin-bottom: 20px;
  text-align: center;
}
.company-logo {
  width: 90px;
  height: 90px;
  object-fit: contain;
}
.company-name { color: #28a745; font-weight: 800; font-size: 28px; margin-bottom: 4px; }
.company-motto { color: #daa520; font-weight: 600; font-size: 18px; margin-bottom: 4px; }
.company-address { background: #000; color: #fff; padding: 4px 10px; border-radius: 4px; font-size: 14px; }

/* Form Grid */
.form-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px 40px;
  width: 100%;
}
.form-grid label { font-weight: bold; margin-bottom: 2px; color: #000; } /* Labels black */
.form-grid input, .form-grid select, .form-grid textarea {
  width: 100%;
  border: none;
  border-bottom: 2px solid #28a745;
  padding: 5px 4px;
  font-size: 14px;
  background: transparent;
  color: #000; /* Input text black */
}
.form-grid input:focus, .form-grid select:focus, .form-grid textarea:focus {
  outline: none;
  border-bottom-color: #007bff;
}

/* Submit Button */
.form-submit input {
  padding: 10px 20px;
  font-weight: bold;
  background: #004080;
  color: #fff;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  margin: 5px;
}
.form-submit input:hover { background: #0066cc; }

/* Footer */
.footer { margin-top: auto; }

/* Print */
@media print {
  body { background: none; display: block; }
  .a4-portrait { box-shadow: none; margin: 0; padding: 15mm; border: none; }
  .back-link, .form-submit { display: none; }
}
</style>
{% endblock %}
